hugepages = 100
stats = 1
uuid="b98aeac0-fef1-428f-b0e1-314350d4f4a5"

# Nodi per un test di collegamento
nodes = {
	nodo_villas_lab_a = {
        type = "socket",
        layer = "udp",
        #vectorize = 30,            # Receive and sent 30 samples per message (combining).
        builtin = true,             # By default, all nodes will have a few builtin hooks attached to them.
                                    # When collecting statistics or measurements these are undesired.
        format = {
                        type = "json",
                        indent = 0,
                        compact = false,
                        ts_received = true,
                        ts_origin = true,
                        offset = true,
                        real_precision = 6,
                        sequence = true
        },
        in = {
            address = "*:12000", # FROM VILLAS LAB B
            signals = (
                    { name = "V", unit = "Volt", type = "complex"}
            )
        },
        out = {
            address = "192.168.1.220:12003",  # TO VILLAS LAB B
            netem = {                   # Network emulation settings
                enabled = false,
                delay = 100000,          # Additional latency in microseconds
                jitter = 30000,          # Jitter in uS
                distribution = "normal", # Distribution of delay: uniform, normal, pareto, paretonormal
                loss = 2,               # Packet loss in percent
                duplicate = 0,          # Duplication in percent
                corrupt = 0             # Corruption in percent
            },
            signals = (
                    { name = "I", unit = "Ampere", type = "complex"}
            )
        }
    },
    nodo_dpsim_lab_a = {
        type = "socket",
        layer = "udp",
        #vectorize = 30,            # Receive and sent 30 samples per message (combining).
        builtin = true,             # By default, all nodes will have a few builtin hooks attached to them.
                                    # When collecting statistics or measurements these are undesired.
        format = {
                        type = "json",
                        indent = 0,
                        compact = false,
                        ts_received = true,
                        ts_origin = true,
                        offset = true,
                        real_precision = 6,
                        sequence = true
        },
        in = {
            address = "*:12001", # FROM DPSIM LAB A
            signals = (
                    { name = "I", unit = "Ampere", type = "complex"}
            )
        },
        out = {
            address = "dpsim_lab_a:12000",  # TO DPSIM LAB A
            netem = {                   # Network emulation settings
                enabled = false,
                delay = 100000,          # Additional latency in microseconds
                jitter = 30000,          # Jitter in uS
                distribution = "normal", # Distribution of delay: uniform, normal, pareto, paretonormal
                loss = 2,               # Packet loss in percent
                duplicate = 0,          # Duplication in percent
                corrupt = 0             # Corruption in percent
            },
            signals = (
                    { name = "V", unit = "Volt", type = "complex"}
            )
        }
    },
    file_current = 
    {
        type    = "file",
        
        ### The following settings are specific to the file node-type!! ###
        uri = "/logs/log_current_labA_dp_%Y-%m-%d_%H-%M-%S.log",
        format = {
                        type = "json",
                        indent = 0,
                        compact = false,
                        ts_received = true,
                        ts_origin = true,
                        offset = true,
                        real_precision = 6,
                        sequence = true
        },

        in = {
            epoch_mode = "direct",       # One of: direct (default), wait, relative, absolute
            epoch = 0,                   # The interpretation of this value depends on epoch_mode (default is 0).
                                        # Consult the documentation of a full explanation

            rate = 0,                   # A constant rate at which the lines of the input files should be read
                                        # A missing or zero value will use the timestamp in the first column
                                        # of the file to determine the pause between consecutive lines.
            eof = "rewind",              # Rewind the file and start from the beginning.

            buffer_size = 0             # Creates a stream buffer if value is positive
        },
        out = {
            flush = true,              # Flush or upload contents of the file every time new samples are sent.
            buffer_size = 1,            # Creates a stream buffer if value is positive
            signals = (
                { name = "I", unit = "Ampere", type = "complex"}
            )
        }
    },
    file_voltage = 
    {
        type    = "file",
        
        ### The following settings are specific to the file node-type!! ###
        uri = "/logs/log_voltage_labA_dp_%Y-%m-%d_%H-%M-%S.log",
        format = {
                        type = "json",
                        indent = 0,
                        compact = false,
                        ts_received = true,
                        ts_origin = true,
                        offset = true,
                        real_precision = 6,
                        sequence = true
        },
        in = {
            epoch_mode = "direct",       # One of: direct (default), wait, relative, absolute
            epoch = 0,                   # The interpretation of this value depends on epoch_mode (default is 0).
                                        # Consult the documentation of a full explanation

            rate = 0,                    # A constant rate at which the lines of the input files should be read
                                        # A missing or zero value will use the timestamp in the first column
                                        # of the file to determine the pause between consecutive lines.
            eof = "rewind",              # Rewind the file and start from the beginning.

            buffer_size = 0,             # Creates a stream buffer if value is positive
        },
        out = {
            flush = true,               # Flush or upload contents of the file every time new samples are sent.
            buffer_size = 1,            # Creates a stream buffer if value is positive
            signals = (
                    { name = "V", unit = "Volt", type = "complex"}
            )
        }
    },
    mqtt_voltage_log = {
        type = "mqtt",
        
        format = {
                        type = "json",
                        indent = 0,
                        compact = false,
                        ts_received = true,
                        ts_origin = true,
                        offset = true,
                        real_precision = 6,
                        sequence = true
        },
 
        username = "villas",
        password = "villas",
        host = "mqtt_broker", # host.docker.internal
        port = 1883,
        
        keepalive = 60,      # Send ping every 5 seconds to keep connection alive
        retain = false,
        qos = 0,
        
        in = {
                subscribe = "simulation/2labs_dp/LabA/voltage/ingress",
        },
        out = {
                publish = "simulation/2labs_dp/LabA/voltage/egress",
                signals = (
                    { name = "V", unit = "Volt", type = "complex"}
                )
            }
    },
    mqtt_current_log = {
        type = "mqtt",
        
        format = {
                        type = "json",
                        indent = 0,
                        compact = false,
                        ts_received = true,
                        ts_origin = true,
                        offset = true,
                        real_precision = 6,
                        sequence = true
        },
 
        username = "villas",
        password = "villas",
        host = "mqtt_broker", # host.docker.internal
        port = 1883,
        
        keepalive = 60,      # Send ping every 60 seconds to keep connection alive
        retain = false,
        qos = 0,
        
        in = {
                subscribe = "simulation/2labs_dp/LabA/current/ingress",
        },
        out = {
                publish = "simulation/2labs_dp/LabA/current/egress",
                signals = (
                    { name = "I", unit = "Ampere", type = "complex"}
                )
            }
    }
}