hugepages = 100
stats = 1
uuid="b98aeac0-fef1-428f-b0e1-314350d4f4a5"

# Nodi per un test di collegamento
nodes = {
    signal_node = {
        type = "signal.v2",
        format = {
                        type = "json",
                        indent = 0,
                        compact = false,
                        ensure_ascii = true,
                        escape_slash = false,
                        ts_received = true,
                        ts_origin = true,
                        offset = true,
                        real_precision = 6,
                        sequence = true
        },
        rate = 50.0,
        realtime = true,            # Wait between emitting each sample
        limit = 300,                # Only emit 300 samples, then stop
        monitor_missed = true,      # Count and warn about missed steps
        in = {
            signals = (
                { name = "signal",   signal = "sine",   amplitude = 230.00, frequency = 1, offset = 1.0   }
            )           
        }
    },
    nodo_signal_lab_a = {
        type = "signal",
        format = {
                        type = "json",
                        indent = 0,
                        compact = false,
                        ts_received = true,
                        ts_origin = true,
                        offset = false,
                        real_precision = 6,
                        sequence = true
        },
        signal = "sine",
        values = 1,
        amplitude = 1.414,
        frequency = 1.0,
        rate = 50.0,
        realtime = true,            # Wait between emitting each sample
        limit = 300,                # Only emit 300 samples, then stop
    },
	nodo_villas_lab_a = {
        type = "socket",
        layer = "udp",
        builtin = true,             # By default, all nodes will have a few builtin hooks attached to them.
                                    # When collecting statistics or measurements these are undesired.
        format = {
                        type = "json",
                        indent = 0,
                        compact = false,
                        ts_received = true,
                        ts_origin = true,
                        offset = false,
                        real_precision = 6,
                        sequence = true
        },
        in = {
            address = "*:12000", # FROM VILLAS LAB B
            signals = (
                    { name = "signal", unit = "Volt", type = "float"}
            )
        },
        out = {
            address = "villas_lab_b:12003",  # TO VILLAS LAB B
            netem = {                   # Network emulation settings
                enabled = false,
                delay = 100000,          # Additional latency in microseconds
                jitter = 30000,          # Jitter in uS
                distribution = "normal", # Distribution of delay: uniform, normal, pareto, paretonormal
                loss = 2,               # Packet loss in percent
                duplicate = 0,          # Duplication in percent
                corrupt = 0             # Corruption in percent
            },
            signals = (
                    { name = "signal", unit = "Volt", type = "float"}
            )
        }
    },
    file_csv = {
        type = "file"
        uri = "/logs/log_signal_labA_CSV_%Y-%m-%d_%H-%M-%S.csv",

        format = {
            type = "csv",
            real_precision = 6,
            ts_origin = true,
            ts_received = true,
            sequence = true,
            data = true,
            offset = true,
            separator = ",",
            delimiter = "\n",
            skip_first_line = false
            header = true
        }
    },
    file_tsv = {
        type = "file"
        uri = "/logs/log_signal_labA_TSV_%Y-%m-%d_%H-%M-%S.tsv",

        format = {
            type = "tsv"
            real_precision = 6,
            ts_origin = true,
            ts_received = true,
            sequence = true,
            data = true,
            offset = true,
            separator = "\t",
            delimiter = "\n",
            skip_first_line = false,
            header = true
        }
    },
    mqtt_signal_log = {
        type = "mqtt",
        
        format = {
                        type = "json",
                        indent = 0,
                        compact = false,
                        ts_received = true,
                        ts_origin = true,
                        offset = false,
                        real_precision = 6,
                        sequence = true
        },
 
        username = "villas",
        password = "villas",
        host = "mqtt_broker", # host.docker.internal
        port = 1883,
        
        keepalive = 60,      # Send ping every 5 seconds to keep connection alive
        retain = false,
        qos = 0,
        
        in = {
                subscribe = "simulation/2nodes/LabA/voltage/ingress",
        },
        out = {
                publish = "simulation/2nodes/LabA/voltage/egress",
                signals = (
                    { name = "signal", unit = "Volt", type = "float"}
                )
            }
    }
}